<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Retrofit with okhttp - PPTing&#039;s Blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="PPTing&#039;s Blog"><meta name="msapplication-TileImage" content="/favicon.ico"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="PPTing&#039;s Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="å°è£…æ¥å£é¦–å…ˆï¼Œæˆ‘ä»¬å°†å°†è¯·æ±‚apiå°è£…æˆä¸€ä¸ªæ¥å£ï¼ˆinterfaceï¼‰ï¼Œ Retrofit é€šè¿‡è¿™ä¸ªå®šä¹‰çš„interfaceç”Ÿæˆä¸€ä¸ªå…·ä½“çš„å®ç°ã€‚åœ¨interfaceä¸­è¿›è¡Œæ¥å£apiçš„å®šä¹‰ï¼Œæ¯”å¦‚ 1234    public interface RepoService &amp;amp;#123;    @GET(&amp;quot;&amp;#x2F;users&amp;#x2F;&amp;amp;#123;user&amp;amp;#125;&amp;#x2F;repos&amp;quot;)    Call&amp;amp;l"><meta property="og:type" content="blog"><meta property="og:title" content="Retrofit with okhttp"><meta property="og:url" content="https://ppting.me/2016/10/18/2016_10_18_retrofit_with_okhttp/"><meta property="og:site_name" content="PPTing&#039;s Blog"><meta property="og:description" content="å°è£…æ¥å£é¦–å…ˆï¼Œæˆ‘ä»¬å°†å°†è¯·æ±‚apiå°è£…æˆä¸€ä¸ªæ¥å£ï¼ˆinterfaceï¼‰ï¼Œ Retrofit é€šè¿‡è¿™ä¸ªå®šä¹‰çš„interfaceç”Ÿæˆä¸€ä¸ªå…·ä½“çš„å®ç°ã€‚åœ¨interfaceä¸­è¿›è¡Œæ¥å£apiçš„å®šä¹‰ï¼Œæ¯”å¦‚ 1234    public interface RepoService &amp;amp;#123;    @GET(&amp;quot;&amp;#x2F;users&amp;#x2F;&amp;amp;#123;user&amp;amp;#125;&amp;#x2F;repos&amp;quot;)    Call&amp;amp;l"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://ppting.me/img/og_image.png"><meta property="article:published_time" content="2016-10-18T02:14:40.000Z"><meta property="article:modified_time" content="2022-02-04T05:39:49.556Z"><meta property="article:author" content="PPTing"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://ppting.me/2016/10/18/2016_10_18_retrofit_with_okhttp/"},"headline":"Retrofit with okhttp","image":["https://ppting.me/img/og_image.png"],"datePublished":"2016-10-18T02:14:40.000Z","dateModified":"2022-02-04T05:39:49.556Z","author":{"@type":"Person","name":"PPTing"},"publisher":{"@type":"Organization","name":"PPTing's Blog","logo":{"@type":"ImageObject","url":"https://ppting.me/favicon.ico"}},"description":"å°è£…æ¥å£é¦–å…ˆï¼Œæˆ‘ä»¬å°†å°†è¯·æ±‚apiå°è£…æˆä¸€ä¸ªæ¥å£ï¼ˆinterfaceï¼‰ï¼Œ Retrofit é€šè¿‡è¿™ä¸ªå®šä¹‰çš„interfaceç”Ÿæˆä¸€ä¸ªå…·ä½“çš„å®ç°ã€‚åœ¨interfaceä¸­è¿›è¡Œæ¥å£apiçš„å®šä¹‰ï¼Œæ¯”å¦‚ 1234    public interface RepoService &amp;#123;    @GET(&quot;&#x2F;users&#x2F;&amp;#123;user&amp;#125;&#x2F;repos&quot;)    Call&amp;l"}</script><link rel="canonical" href="https://ppting.me/2016/10/18/2016_10_18_retrofit_with_okhttp/"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=UA-51029889-1" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'UA-51029889-1');</script><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start -->
        <script>
            function switchTab(element) {
                const id = element.parentElement.id;
                const tabElements = element.parentElement.parentElement.children;
                const contentElements = element.parentElement.parentElement.parentElement.parentElement.children[1].children;
                for (let i = 0; i < tabElements.length; i++) {
                    const $tab = tabElements[i];
                    const $content = contentElements[i];
                    if ($tab.id === id) {
                        $tab.classList.add('is-active');
                    } else {
                        $tab.classList.remove('is-active');
                    }
                    if ($content.id === id) {
                        $content.classList.remove('is-hidden');
                    } else {
                        $content.classList.add('is-hidden');
                    }
                }
            }
        </script>
        <!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.0.0"><link rel="alternate" href="/atom.xml" title="PPTing's Blog" type="application/atom+xml">
</head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/favicon.ico" alt="PPTing&#039;s Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/PPTing"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="ç›®å½•" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="æœç´¢" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-9-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2016-10-18T02:14:40.000Z" title="10/18/2016, 10:14:40 AM">2016-10-18</time>å‘è¡¨</span><span class="level-item"><time dateTime="2022-02-04T05:39:49.556Z" title="2/4/2022, 1:39:49 PM">2022-02-04</time>æ›´æ–°</span><span class="level-item"><a class="link-muted" href="/categories/Android/">Android</a></span><span class="level-item">22 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦3283ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile">Retrofit with okhttp</h1><div class="content"><h2 id="å°è£…æ¥å£"><a href="#å°è£…æ¥å£" class="headerlink" title="å°è£…æ¥å£"></a>å°è£…æ¥å£</h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬å°†å°†è¯·æ±‚apiå°è£…æˆä¸€ä¸ªæ¥å£ï¼ˆ<code>interface</code>ï¼‰ï¼Œ Retrofit é€šè¿‡è¿™ä¸ªå®šä¹‰çš„<code>interface</code>ç”Ÿæˆä¸€ä¸ªå…·ä½“çš„å®ç°ã€‚<br>åœ¨<code>interface</code>ä¸­è¿›è¡Œæ¥å£apiçš„å®šä¹‰ï¼Œæ¯”å¦‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">    public interface RepoService &#123;</span><br><span class="line">    @GET(&quot;/users/&#123;user&#125;/repos&quot;)</span><br><span class="line">    Call&lt;ResponseBody&gt; listRepo(@Path(&quot;user&quot;) String user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<ul>
<li>å…¶ä¸­ <code>æ³¨è§£@GET</code> ä»£è¡¨è¿™ä¸ªè¯·æ±‚ä½¿ç”¨ <code>GET</code>æ–¹æ³•</li>
</ul>
<h2 id="æ„é€ Retrofit"><a href="#æ„é€ Retrofit" class="headerlink" title="æ„é€ Retrofit"></a>æ„é€ <code>Retrofit</code></h2><p>æ¥ç€ï¼Œæˆ‘ä»¬æ„é€ <code>Retrofit</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">RepoService repoService = HttpUtil_Github.getInstance().create(RepoService.class);</span><br><span class="line">Call&lt;ResponseBody&gt; call = repoService.listRepo(user);</span><br></pre></td></tr></table></figure>
<ul>
<li>å½“è°ƒç”¨ <code>listRepo(String user)</code>è¿™ä¸ªæ–¹æ³•æ—¶ï¼Œä¼ å…¥çš„å‚æ•°ä¼šå¡«å…¥åˆ° æ³¨è§£ä¸­ <code>&#123;user&#125;</code> ä¸­</li>
<li><code>HttpUtil_Github.getInstance</code>è¿™ä¸ªæ–¹æ³•å»è·å– Retrofit çš„ä¸€ä¸ªå•ä¾‹<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">private Retrofit retrofit;</span><br><span class="line">private static volatile HttpUtil_Github instance = null;</span><br><span class="line">public HttpUtil_Github() &#123;</span><br><span class="line">    retrofit = new Retrofit.Builder()</span><br><span class="line">        .baseUrl(NetUtil.GITHUB)</span><br><span class="line">        .addConverterFactory(GsonConverterFactory.create())</span><br><span class="line">        .build();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//å•ä¾‹</span><br><span class="line">public static HttpUtil_Github getInstance()&#123;</span><br><span class="line">    HttpUtil_Github mInstance = instance;</span><br><span class="line">    if (mInstance == null)&#123;</span><br><span class="line">        synchronized (HttpUtil_Github.class)&#123;</span><br><span class="line">            mInstance = instance;</span><br><span class="line">            if (mInstance == null)&#123;</span><br><span class="line">                mInstance = new HttpUtil_Github();</span><br><span class="line">                instance = mInstance;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return mInstance;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public &lt;T&gt; T create(Class&lt;T&gt; service) &#123;</span><br><span class="line">    return retrofit.create(service);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<p>##å‘èµ·è¯·æ±‚</p>
<p>ç„¶åé€šè¿‡å¼‚æ­¥å‘èµ·<code>GET</code>è¯·æ±‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">call.enqueue(new Callback&lt;ResponseBody&gt;() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onResponse(Call&lt;ResponseBody&gt; call, Response&lt;ResponseBody&gt; response) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Log.d(TAG,&quot;&quot;+call.request().url());</span><br><span class="line">            Log.d(TAG,response.body().string());</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    @Override public void onFailure(Call&lt;ResponseBody&gt; call, Throwable t) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>åœ¨åˆ›å»º <code>Retrofit</code> å¯¹è±¡æ—¶ï¼Œä¼ å…¥æˆ‘ä»¬çš„æœåŠ¡å™¨çš„åœ°å€ <code>baseUrl</code>ï¼Œå®Œæ•´çš„è¯·æ±‚è·¯å¾„å°±æ˜¯é€šè¿‡è¿™ä¸ª<code>baseUrl</code>å’Œæˆ‘ä»¬æ³¨è§£ä¸­çš„åœ°å€å·²ç»ä¼ å…¥çš„å‚æ•°ç»“åˆèµ·æ¥çš„ã€‚</p>
<blockquote>
</blockquote>
<p>è¿™é‡Œè®²ä¸€ä¸‹urlçš„é…ç½®<br>åˆ†ä¸ºå‡ ç§æƒ…å†µ</p>
<ol>
<li><p><code>baseUrl</code>ä½¿ç”¨<code>æ ¹åŸŸåå½¢å¼</code> å’Œ <code>path</code>ä½¿ç”¨<code>ç»å¯¹è·¯å¾„å½¢å¼</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">baseUrl: https://api.github.com</span><br><span class="line">path: /users/&#123;user&#125;/repos</span><br><span class="line">url: https://api.github.com/users/tingya/repos</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>baseUrl</code>ä½¿ç”¨<code>ç›®å½•å½¢å¼</code> å’Œ <code>path</code>ä½¿ç”¨<code>ç›¸å¯¹è·¯å¾„å½¢å¼</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">baseUrl: https://api.github.com/</span><br><span class="line">path: users/&#123;user&#125;/repos</span><br><span class="line">url: https://api.github.com/users/tingya/repos</span><br></pre></td></tr></table></figure>
<p> æˆ–è€…</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">baseUrl: https://api.github.com/users/</span><br><span class="line">path:&#123;user&#125;/repos</span><br><span class="line">url:https://api.github.com/users/tingya/repos</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>baseUrl</code>ä½¿ç”¨<code>ç›®å½•å½¢å¼</code> å’Œ <code>path</code>ä½¿ç”¨<code>ç»å¯¹è·¯å¾„å½¢å¼</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">baseUrl:  https://api.github.com/users/</span><br><span class="line">path: /&#123;user&#125;/repos</span><br><span class="line">url:  https://api.github.com/tingya/repos</span><br></pre></td></tr></table></figure>
</li>
<li><p><del><code>baseUrl</code>ä½¿ç”¨<code>æ–‡ä»¶å½¢å¼</code> å’Œ <code>path</code>ä½¿ç”¨<code>ç›¸å¯¹è·¯å¾„å½¢å¼</code></del></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">baseUrl:https://api.github.com/users</span><br><span class="line">path:&#123;user&#125;/repos</span><br><span class="line">url: https://api.github.com/tingya/repos</span><br></pre></td></tr></table></figure>
<p> <em><strong>è¿™ç§æƒ…å†µä¸‹ä¼šæŠ¥é”™</strong></em><br> error: <code>baseUrl must end in /: https://api.github.com/users </code> </p>
</li>
<li><p><code>path</code>ä½¿ç”¨<code>å®Œå…¨è·¯å¾„</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">baseUrl: https://api.github.com/users/</span><br><span class="line">path https://api.github.com/users/&#123;user&#125;/repos</span><br><span class="line">url: https://api.github.com/users/tingya/repos</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>å½“ä½ ä½¿ç”¨å®Œå…¨è·¯å¾„æ—¶ï¼ŒRetrofitå°±ä¼šå¿½ç•¥æ‰ä½ å®ä¾‹åŒ–å®ƒæ—¶é€šè¿‡baseUrl()æ–¹æ³•ä¼ ç»™å®ƒçš„host(æ¥å£å‰ç¼€åœ°å€)ï¼›<br>å› ä¸ºåœ¨å®é™…é¡¹ç›®ä¸­å¯èƒ½ä¼šæœ‰å‡ ä¸ªä¸åŒipçš„hostæˆ–è€…ç«¯å£ä¸åŒçš„hostï¼Œé€šè¿‡è¿™ä¸ªæ–¹æ³•å¯ä»¥é¿å…å®ä¾‹åŒ–å¤šä¸ª<code>Retrofit</code>å¯¹è±¡</p>
</li>
</ol>
<p>ä¸Šé¢æ˜¯æœ€ç®€å•çš„<code>GET</code>è¯·æ±‚çš„demo<br>ä¸‹é¢æ¥è¯´è¯´å…¶ä»–çš„è¯·æ±‚æ–¹å¼ä»¥åŠå‚æ•°çš„é…ç½®</p>
<h2 id="GETæ–¹æ³•"><a href="#GETæ–¹æ³•" class="headerlink" title="GETæ–¹æ³•"></a>GETæ–¹æ³•</h2><p>baseUrl æ˜¯ <code>https://api.demo.com</code></p>
<h3 id="Path"><a href="#Path" class="headerlink" title="@Path"></a>@Path</h3><p>è¿™ä¸ªæ³¨è§£ç”¨æ¥æ›¿æ¢ç›¸å¯¹è·¯å¾„ä¸­çš„å€¼</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@GET(&quot;/users/&#123;user&#125;/repos&quot;)</span><br><span class="line">Call&lt;ResponseBody&gt; getMessage(@Path(&quot;user&quot;) String user);</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡<code>Call&lt;ResponseBody&gt; call = repoService.getMessage(&quot;name&quot;);</code><br>æœ€ç»ˆçš„<code>url</code>ç­‰ä»·äº<code>https://api.demo.com/user/name/repos</code></p>
<h3 id="Query-å’Œ-QueryMap"><a href="#Query-å’Œ-QueryMap" class="headerlink" title="@Query å’Œ @QueryMap"></a>@Query å’Œ @QueryMap</h3><p>è¿™ä¸ªæ³¨è§£æ˜¯ç”¨æ¥ç»™<code>GET</code>æ–¹æ³•ä¼ å‚çš„ï¼Œåªèƒ½ç”¨äº<code>GET</code>æ–¹æ³•</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@GET(&quot;/users/name/repos&quot;)</span><br><span class="line">Call&lt;ResponseBody&gt; getMessage(@Query(&quot;age&quot;) int age);</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡<code>Call&lt;ResponseBody&gt; call = repoService.getMessage(20);</code><br>æœ€ç»ˆçš„urlç­‰ä»·äº<code>https://api.demo.com/user/name/repos?age=20</code><br>å½“æœ‰Nä¸ªå‚æ•°æ—¶ï¼Œæˆ‘ä»¬æ€»ä¸èƒ½è¯´å»å†™Nä¸ª<code>@Query</code>å§ï¼Œå¦‚æœé‡åˆ°æœ‰äº›æƒ…å†µä¸‹åªéœ€è¦éƒ¨åˆ†å‚æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±å¾—å†å»å†™ä¸€ä¸ª<code>interface</code>ï¼Œä½¿ç”¨ä¸åŒæ•°é‡çš„å‚æ•°ï¼Œè¿™æ ·ä¸åˆ©äºæˆ‘ä»¬ä»£ç çš„è§£è€¦<br>è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬åº”è¯¥ä½¿ç”¨ <code>@QueryMap</code> è¿™ä¸ªæ³¨è§£</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@GET(&quot;/users/name/repos&quot;)</span><br><span class="line">Call&lt;ResponseBody&gt; getMessage(@QueryMap Map&lt;String,Object&gt; map)</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;String,Object&gt; map = new HashMap();</span><br><span class="line">map.put(&quot;age&quot;,20);</span><br><span class="line">map.put(&quot;sex&quot;,&quot;famale&quot;);</span><br><span class="line">Call&lt;ResponseBody&gt; call = repoService.getMessage(map);</span><br></pre></td></tr></table></figure>

<p>æœ€ç»ˆçš„urlç­‰ä»·äº<code>https://api.demo.com/user/name/repos?age=20&amp;sex=famale</code></p>
<h2 id="POSTæ–¹æ³•"><a href="#POSTæ–¹æ³•" class="headerlink" title="POSTæ–¹æ³•"></a>POSTæ–¹æ³•</h2><h3 id="Field"><a href="#Field" class="headerlink" title="@Field"></a>@Field</h3><p>é€šè¿‡postæ–¹æ³•æäº¤è¡¨å•</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@Post(&quot;/user/name/repos&quot;)</span><br><span class="line">Call&lt;ResponseBody&gt; getMessage(@Field(&quot;age&quot;) int age );</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡<code>Call&lt;ResponseBody&gt; call = repoService.getMessage(20)</code><br>ä¼šå¾€httpè¯·æ±‚çš„<code>body</code>ä¸­æ·»åŠ è¡¨å•<code>age=20</code></p>
<h3 id="FieldMap"><a href="#FieldMap" class="headerlink" title="@FieldMap"></a>@FieldMap</h3><p>å½“éœ€è¦é€šè¿‡<code>POSTæ–¹æ³•</code>æäº¤å¤šä¸ªkey&#x3D;valueæ—¶å€™ï¼Œå¯ä»¥é€šè¿‡<code>@FieldMap</code>è¿™ä¸ªæ³¨è§£æäº¤å¤šä¸ªå‚æ•°</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@POST(&quot;&quot;)</span><br><span class="line">Call&lt;ResponseBody&gt; getMessage(@FieldMap Map&lt;String,Object&gt; map)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;String,Object&gt; map = new HashMap();</span><br><span class="line">map.put(&quot;age&quot;,20);</span><br><span class="line">map.put(&quot;sex&quot;,&quot;famale&quot;);</span><br><span class="line">Call&lt;ResponseBody&gt; call = repoService.getMessage(map);</span><br></pre></td></tr></table></figure>

<h2 id="ä¼ jsonæ•°æ®"><a href="#ä¼ jsonæ•°æ®" class="headerlink" title="ä¼ jsonæ•°æ®"></a>ä¼ jsonæ•°æ®</h2><p>æ¯”å¦‚éœ€è¦ä¼ ä¸‹é¢è¿™æ ·çš„jsonæ ¼å¼çš„æ•°æ®</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    name:xxx,</span><br><span class="line">    age:20</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å†™ä¸€ä¸ª JavaBeanï¼Œå­˜æ”¾æ•°æ®<br>æ¯”å¦‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public class UserInfo &#123;</span><br><span class="line">    private String name;</span><br><span class="line">    private int age;</span><br><span class="line">    public String getName() &#123; return name;&#125;</span><br><span class="line">    public void setName(String name) &#123; this.name = name;&#125;</span><br><span class="line">    public int getAge() &#123; return age;&#125;</span><br><span class="line">    public void setAge(int age) &#123; this.age = age;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å®šä¹‰æ¥å£ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@POST(&quot;/user/name/repos&quot;)</span><br><span class="line">Call&lt;ResponseBody&gt; getMessage(@Body UserInfo userInfo);</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡ä¸‹é¢çš„æ–¹æ³•å»è°ƒç”¨æ¥å£</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">UserInfo userInfo = new UserInfo();</span><br><span class="line">userInfo.setAge(20);</span><br><span class="line">userInfo.setName(&quot;user&quot;);</span><br><span class="line">Call&lt;ResponseBody&gt; call = service.getMessage(userInfo);</span><br></pre></td></tr></table></figure>

<h2 id="ä¼ æ–‡ä»¶"><a href="#ä¼ æ–‡ä»¶" class="headerlink" title="ä¼ æ–‡ä»¶"></a>ä¼ æ–‡ä»¶</h2><p>å®šä¹‰æ¥å£</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@Multipart //è¿™ä¸ªæ³¨è§£ä¸ºhttpè¯·æ±‚æŠ¥æ–‡å¤´æ·»åŠ  Content-Type: multipart/form-data; boundary=5b7b2ddf-bef2-4a32-ac21-e4662ea82771</span><br><span class="line">//å¯¹åº”è¯·æ±‚å¤´ ç¬¬ä¸€è¡Œ</span><br><span class="line">@POST(&quot;http://api.stay4it.com/v1/public/core/?service=user.updateAvatar&quot;)</span><br><span class="line">Call&lt;ResponseBody&gt; upload(@Part(&quot;access_token&quot;) RequestBody token,  //é€šè¿‡`@Part`è¿™ä¸ªæ³¨è§£ï¼Œä¼šå¸®æˆ‘ä»¬åœ¨è¯·æ±‚å¤´ä¸­ç”Ÿæˆ`Content-Disposition: form-data; name=&quot;access_token&quot;`è¿™æ ·çš„è¯·æ±‚æ ¼å¼</span><br><span class="line">@Part MultipartBody.Part picture);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">//è®¾ç½® Content-Type</span><br><span class="line">RequestBody requestFile = RequestBody.create(MediaType.parse(&quot;image/png&quot;), file);</span><br><span class="line"></span><br><span class="line">//è®¾ç½® requestFile çš„ Content-Disposition form-data; name=&quot;pic&quot;; filename=&quot;icon_equipment.png&quot;//`filename`æ˜¯æŒ‡æƒ³æ”¾åœ¨æœåŠ¡å™¨çš„å›¾ç‰‡åå­— </span><br><span class="line"></span><br><span class="line">MultipartBody.Part body = MultipartBody.Part.createFormData(&quot;pic&quot;, file.getName(), requestFile);</span><br><span class="line">//ä¸Šé¢è¿™è¡Œä¸­ï¼Œ`createFormData(a,b,c)`ä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¼ `name`ï¼Œç›¸å½“äº`@Part(&quot;access_token&quot;) RequestBody token`ä¸­çš„`access_token`,æ‰€ä»¥ä¸€èˆ¬ä¸èƒ½ä½¿ç”¨`@Part(&quot;text&quot;) MultipartBody.Part picture`ï¼Œå› ä¸ºåœ¨æ„å»ºMultipartBody.Partæ—¶ï¼Œå·²ç»åŒ…å«äº†`picture`çš„nameåœ¨é‡Œé¢ï¼Œå…¶å®è¿™å¹¶ä¸èƒ½è¿è¡ŒğŸ˜„</span><br><span class="line"></span><br><span class="line">UploadFileService uploadFileService = HttpUtil_Gank.getInstance().create(UploadFileService.class);</span><br><span class="line"></span><br><span class="line">Call&lt;ResponseBody&gt; call = uploadFileService.upload(</span><br><span class="line">    RequestBody.create(MediaType.parse(&quot;multipart/form-data&quot;), &quot;token value jai485789hqn485yhhwb &quot;),//æºå¸¦çš„æ–‡å­—ä¿¡æ¯</span><br><span class="line">    body);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä¸‹é¢æ˜¯ä¸Šé¢çš„è¯·æ±‚ç»„æˆçš„ä¸Šä¼ æ–‡ä»¶çš„http Postè¯·æ±‚å¤´<br>å…¶ä¸­<code>boundary</code>æŒ‡çš„æ˜¯åˆ†éš”ç¬¦ï¼Œç”¨æ¥åˆ†å‰²ä¸åŒçš„è¯·æ±‚éƒ¨åˆ†</p>
<blockquote>
<p>å¯ä»¥å¾ˆå®¹æ˜“çœ‹å‡ºï¼Œè¿™ä¸ªè¯·æ±‚ä½“æ˜¯å¤šä¸ªç›¸åŒçš„éƒ¨åˆ†ç»„æˆçš„ï¼š<br>    æ¯ä¸€ä¸ªéƒ¨åˆ†éƒ½æ˜¯ä»¥<code>â€“-</code>åŠ åˆ†éš”ç¬¦å¼€å§‹çš„ï¼Œç„¶åæ˜¯è¯¥éƒ¨åˆ†å†…å®¹çš„æè¿°ä¿¡æ¯(<code>Content-Disposition</code>)ï¼Œç„¶åä¸€ä¸ªå›è½¦ï¼Œç„¶åæ˜¯æè¿°ä¿¡æ¯çš„å…·ä½“å†…å®¹ï¼›<br>    å¦‚æœä¼ é€çš„å†…å®¹æ˜¯ä¸€ä¸ªæ–‡ä»¶çš„è¯ï¼Œé‚£ä¹ˆè¿˜ä¼šåŒ…å«æ–‡ä»¶åä¿¡æ¯(<code>Content-Disposition: form-data; name=&quot;pic&quot;; filename=&quot;icon_equipment.png&quot;</code>)ï¼Œä»¥åŠæ–‡ä»¶å†…å®¹çš„ç±»å‹(<code>Content-Type</code>)ã€‚ä¸‹é¢çš„ç¬¬ä¸‰ä¸ªå°éƒ¨åˆ†å…¶å®æ˜¯ä¸€ä¸ªæ–‡ä»¶ä½“çš„ç»“æ„ï¼Œæœ€åä¼šä»¥â€“åˆ†å‰²ç¬¦â€“ç»“å°¾ï¼Œè¡¨ç¤ºè¯·æ±‚ä½“ç»“æŸã€‚<br>    â€”-<a target="_blank" rel="noopener" href="http://blog.csdn.net/jdsjlzx/article/details/52246114"> Android Retrofit å®ç°æ–‡å­—ï¼ˆå‚æ•°ï¼‰å’Œå¤šå¼ å›¾ç‰‡ä¸€èµ·ä¸Šä¼ </a></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"> D/OkHttp: --&gt; POST http://api.stay4it.com/v1/public/core/?service=user.updateAvatar http/1.1</span><br><span class="line"> D/OkHttp: Content-Type: multipart/form-data; boundary=ed6fdfed-e436-4096-a70a-3a7b9657c933</span><br><span class="line"> D/OkHttp: Content-Length: 1100</span><br><span class="line"> D/OkHttp: Host: api.stay4it.com</span><br><span class="line"> D/OkHttp: Connection: Keep-Alive</span><br><span class="line"> D/OkHttp: Accept-Encoding: gzip</span><br><span class="line"> D/OkHttp: User-Agent: okhttp/3.4.1</span><br><span class="line"> D/OkHttp: --ed6fdfed-e436-4096-a70a-3a7b9657c933</span><br><span class="line"> D/OkHttp: Content-Disposition: form-data; name=&quot;access_token&quot;</span><br><span class="line"> D/OkHttp: Content-Transfer-Encoding: binary</span><br><span class="line"> D/OkHttp: Content-Type: multipart/form-data; charset=utf-8</span><br><span class="line"> D/OkHttp: Content-Length: 33</span><br><span class="line"> D/OkHttp: token value jai485789hqn485yhhwb </span><br><span class="line"> D/OkHttp: --ed6fdfed-e436-4096-a70a-3a7b9657c933</span><br><span class="line"> D/OkHttp: Content-Disposition: form-data; name=&quot;pic&quot;; filename=&quot;icon_equipment.png&quot;</span><br><span class="line"> D/OkHttp: Content-Type: image/png</span><br><span class="line"> D/OkHttp: Content-Length: 658</span><br><span class="line"> D/OkHttp: ï¿½PNG</span><br><span class="line"> D/OkHttp: </span><br><span class="line"> D/OkHttp: ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½IHDRï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Fï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Fï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Fï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½PLTEï¿½ï¿½ï¿½ï¿½ï¿½ï¿½|ï¿½ï¿½|ï¿½ï¿½|ï¿½ï¿½|ï¿½ï¿½|ï¿½ï¿½|ï¿½ï¿½|ï¿½ï¿½|ï¿½ï¿½|ï¿½ï¿½|ï¿½ï¿½|ï¿½ï¿½|ï¿½ï¿½|ï¿½ï¿½|ï¿½ï¿½|ï¿½ï¿½|ï¿½ï¿½|ï¿½ï¿½|ï¿½ï¿½|ï¿½ï¿½|ï¿½ï¿½|ï¿½ï¿½|ï¿½ï¿½|ï¿½ï¿½|ï¿½ï¿½|ï¿½ï¿½|ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ä°ºï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½â¥°Ø„ï¿½ï¿½~ï¿½ï¿½ï¿½ï¿½ï¿½,) )ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½tRNSï¿½ï¿½ï¿½ï¿½bï¿½ï¿½ï¿½ï¿½Vï¿½_LGï¿½ï¿½ï¿½/,ï¿½ï¿½ï¿½Jï¿½ï¿½ï¿½ï¿½ï¿½ï¿½IDATXÃ¬ï¿½Ë’ï¿½0ï¿½ï¿½N@Pï¿½Öœï¿½ï¿½ï¿½ï¿½ï¿½pÔ²jRï¿½ï¿½Ì·`yï¿½!ï¿½Mï¿½ï¿½ï¿½Rï¿½Lï¿½Uï¿½ï¿½ï¿½Tï¿½ï¿½hYï¿½Hï¿½ï¿½8+ï¿½ï¿½ï¿½SP8ï¿½&quot;ï¿½fï¿½&#125;jï¿½Crï¿½Hï¿½&quot;&#x27;ï¿½*zï¿½ï¿½,ï¿½rï¿½+bï¿½ï¿½ï¿½ï¿½]Y`ï¿½ï¿½ï¿½ï¿½S7ï¿½yï¿½sï¿½Qï¿½ï¿½ï¿½ï¿½ï¿½&amp;dï¿½IÚ™5Fï¿½[ï¿½ï¿½/ï¿½ï¿½0&#125;=*&#x27;ï¿½Xeï¿½ï¿½hxï¿½ï¿½RxJEï¿½Qo1Q ï¿½Mï¿½ï¿½3ï¿½:ï¿½`ï¿½ï¿½*cvpï¿½|ï¿½keï¿½Xï¿½T]ï¿½8[ï¿½eo^ï¿½ï¿½3ï¿½ï¿½ï¿½yï¿½ï¿½uİ¸fï¿½ï¿½&gt;wï¿½Dï¿½1ï¿½ï¿½9&gt;&gt;h)I23ï¿½ï¿½ï¿½ï¿½ï¿½rï¿½ï¿½Iï¿½gï¿½ï¿½bï¿½(ï¿½ï¿½ï¿½@@%ï¿½ï¿½4&quot;ï¿½ï¿½)ï¿½&amp;ï¿½ï¿½ï¿½ï¿½Uw~ï¿½pï¿½uï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Gï¿½-ZMDï¿½ï¿½ï¿½&quot;JGcï¿½ï¿½ï¿½ï¿½È˜ ï¿½dLï¿½ï¿½ï¿½ï¿½Cï¿½ï¿½ï¿½DOï¿½ï¿½ï¿½ï¿½ï¿½ï¿½	B&amp;ï¿½ï¿½ï¿½h&quot;ï¿½	ï¿½$Î‹rï¿½,ï¿½êˆ‘k\ï¿½ï¿½ï¿½k _Jï¿½Yï¿½ï¿½ï¿½*ï¿½ï¿½Uï¿½QÜ­ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½IENDï¿½B`ï¿½</span><br><span class="line"> D/OkHttp: --ed6fdfed-e436-4096-a70a-3a7b9657c933--</span><br><span class="line"> D/OkHttp: --&gt; END POST (1100-byte body)</span><br><span class="line"> D/OkHttp: &lt;-- 200 OK http://api.stay4it.com/v1/public/core/?service=user.updateAvatar (63ms)</span><br><span class="line"> D/OkHttp: Server: nginx/1.4.6 (Ubuntu)</span><br><span class="line"> D/OkHttp: Date: Tue, 18 Oct 2016 02:05:47 GMT</span><br><span class="line"> D/OkHttp: Content-Type: application/json</span><br><span class="line"> D/OkHttp: X-Frame-Options: SAMEORIGIN</span><br><span class="line"> D/OkHttp: Transfer-Encoding: chunked</span><br><span class="line"> D/OkHttp: Proxy-Connection: Keep-alive</span><br><span class="line">10-18 10:05:45.387 28938-1993/me.ppting.gank D/OkHttp: &#123;&quot;ret&quot;:200,&quot;msg&quot;:&quot;æœ‰å¿ƒè¯¾å ‚,ä¼ é€’ç»™ä½ çš„ä¸ä»…ä»…æ˜¯æŠ€æœ¯âœˆï¸&quot;,&quot;data&quot;:[&#123;&quot;url&quot;:&quot;uploads/icon_equipment.png&quot;,&quot;filename&quot;:&quot;icon_equipment.png&quot;&#125;]&#125;</span><br><span class="line">10-18 10:05:45.387 28938-1993/me.ppting.gank D/OkHttp: &lt;-- END HTTP (150-byte body)</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæ˜¯ä¼ å¤šä¸ªæ–‡ä»¶ï¼Œåˆ™ä¸èƒ½åƒä¸Šé¢ä¸Šä¼ ä¸€ä¸ªæ–‡ä»¶ä½¿ç”¨ä¼ <code>MultipartBody.Part</code>å¯¹è±¡çš„æ–¹æ³•ï¼Œè€Œæ˜¯ä½¿ç”¨<code>@PartMap</code>è¿™ä¸ªæ³¨è§£ï¼ŒåŒç†ï¼Œä¼ å¤šä¸ªæ–‡ä»¶å…¶å®å°±æ˜¯åœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ å¤šä¸ªç”±åˆ†éš”ç¬¦éš”å¼€çš„éƒ¨åˆ†ï¼Œæ¯éš”éƒ¨åˆ†éƒ½éœ€è¦æœ‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Content-Dispositionï¼šform-data;name=&quot;pic&quot;;filename=&quot;filename&quot;</span><br><span class="line">Content-Type: image/png</span><br></pre></td></tr></table></figure>
<p>ç­‰ä¿¡æ¯</p>
<p>å¯ä»¥å°†æ¥å£ä¸­çš„ç¬¬äºŒä¸ªå‚æ•°<code>@Part</code>æ”¹ä¸º<code>@PartMap Map&lt;String, RequestBody&gt; params</code><br>å°†<code>name</code> å’Œ <code>filename</code> å­˜åˆ° paramsä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸­<br>å®šä¹‰æ¥å£</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@Multipart //è¿™ä¸ªæ³¨è§£ä¸ºhttpè¯·æ±‚æŠ¥æ–‡å¤´æ·»åŠ  Content-Type: multipart/form-data; boundary=5b7b2ddf-bef2-4a32-ac21-e4662ea82771</span><br><span class="line">@POST(&quot;http://api.stay4it.com/v1/public/core/?service=user.updateAvatar&quot;)</span><br><span class="line">Call&lt;ResponseBody&gt; uploadMore(@PartMap Map&lt;String, RequestBody&gt; map);</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡ä¸‹é¢çš„ä»£ç æ·»åŠ è¯·æ±‚æ–‡ä»¶å¹¶è°ƒç”¨æ¥å£</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;String, RequestBody&gt; map = new HashMap&lt;&gt;();</span><br><span class="line">for (File file : fileList) &#123;</span><br><span class="line">    map.put(file.getName()+&quot;\&quot;;filename=\&quot;&quot;+file.getName(),RequestBody.create(MediaType.parse(&quot;image/png&quot;),file));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">UploadMoreFileService uploadMoreFileService = HttpUtil_Gank.getInstance().create(UploadMoreFileService.class);</span><br><span class="line">Call&lt;ResponseBody&gt; call = uploadMoreFileService.uploadMore(map);</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„mapä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸ºäº†åœ¨<code>Content-Disposition: form-data; name=&quot;pic&quot;; filename=&quot;icon_equipment.png&quot;</code>ä¸­æ‹¼æ¥ <code>name=&quot;name&quot;;</code>å’Œ<code>filename=&quot;filename&quot;</code>ï¼Œå½“å¤šæ–‡ä»¶ä¸Šä¼ æ—¶ï¼Œå¤šä¸ªæ–‡ä»¶çš„nameå¯¹åº”çš„valueåº”è¯¥è®¾ä¸ºä¸åŒçš„å€¼ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬å–äº†æ–‡ä»¶çš„åå­—ä½œä¸ºnameçš„valueã€‚<br>å†™åˆ°è¿™é‡Œæˆ‘ä¹Ÿæœ‰ç‚¹ç–‘é—®ï¼Œé‚£ä¸ºä»€ä¹ˆä¸èƒ½æ¨¡ä»¿åªä¼ ä¸€ä¸ªæ–‡ä»¶çš„æ—¶å€™é‚£æ ·ä½¿ç”¨<code>MultipartBody.Part</code>å‘¢ï¼Œäºæ˜¯æˆ‘è¯•äº†ä¸€ä¸‹<br>å®šä¹‰æ¥å£</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@Multipart</span><br><span class="line">@POST(&quot;http://api.stay4it.com/v1/public/core/?service=user.updateAvatar&quot;)</span><br><span class="line">Call&lt;ResponseBody&gt; uploadMore(@PartMap Map&lt;String,MultipartBody.Part&gt; map);</span><br></pre></td></tr></table></figure>
<p>ç„¶å</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">UploadMoreFileService uploadMoreFileService = HttpUtil_Gank.getInstance().create(UploadMoreFileService.class);</span><br><span class="line"></span><br><span class="line">RequestBody requestFile1 = RequestBody.create(MediaType.parse(&quot;image/png&quot;),firstFile);</span><br><span class="line">RequestBody requestFile2 = RequestBody.create(MediaType.parse(&quot;image/png&quot;),secondFile);</span><br><span class="line"></span><br><span class="line">MultipartBody.Part part1 = MultipartBody.Part.createFormData(&quot;pic&quot;, firstFile.getName(), requestFile1);</span><br><span class="line">MultipartBody.Part part2 = MultipartBody.Part.createFormData(&quot;pic&quot;, secondFile.getName(), requestFile2);</span><br><span class="line"></span><br><span class="line">Map&lt;String, MultipartBody.Part&gt; map = new HashMap&lt;&gt;();</span><br><span class="line">map.put(&quot;&quot;,part1);</span><br><span class="line">map.put(&quot;&quot;,part2);</span><br><span class="line"></span><br><span class="line">Call&lt;ResponseBody&gt; call = uploadMoreFileService.uploadMore(map);</span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯å‘ç°ä¼šæŠ¥é”™<code>@PartMap values cannot be MultipartBody.Part. Use @Part List&lt;Part&gt; or a different value type instead. (parameter #1)</code></p>
<h2 id="æ·»åŠ æ‹¦æˆªå™¨"><a href="#æ·»åŠ æ‹¦æˆªå™¨" class="headerlink" title="æ·»åŠ æ‹¦æˆªå™¨"></a>æ·»åŠ æ‹¦æˆªå™¨</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Request original = chain.request();</span><br><span class="line">HttpUrl originalHttpUrl = original.url();</span><br><span class="line"></span><br><span class="line">HttpUrl url = originalHttpUrl.newBuilder()</span><br><span class="line">    .addQueryParameter(&quot;apikey&quot;, &quot;your-actual-api-key&quot;)</span><br><span class="line">    .build();</span><br><span class="line"></span><br><span class="line">Request.Builder requestBuilder = original.newBuilder()</span><br><span class="line">    .url(url);</span><br><span class="line"></span><br><span class="line">Request request = requestBuilder.build();</span><br><span class="line">return chain.proceed(request);</span><br></pre></td></tr></table></figure>

<h2 id="è‡ªå®šä¹‰-Converter"><a href="#è‡ªå®šä¹‰-Converter" class="headerlink" title="è‡ªå®šä¹‰ Converter"></a>è‡ªå®šä¹‰ Converter</h2><h3 id="å»ºä¸€ä¸ªç»§æ‰¿Converter-Factoryçš„Factoryç±»"><a href="#å»ºä¸€ä¸ªç»§æ‰¿Converter-Factoryçš„Factoryç±»" class="headerlink" title="å»ºä¸€ä¸ªç»§æ‰¿Converter.Factoryçš„Factoryç±»"></a>å»ºä¸€ä¸ªç»§æ‰¿Converter.Factoryçš„Factoryç±»</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">public class StringConverterFactory extends Converter.Factory&#123;</span><br><span class="line"></span><br><span class="line">    public static StringConverterFactory create() &#123;</span><br><span class="line">        return new StringConverterFactory();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    //&#123;@link Body @Body&#125;, &#123;@link Part @Part&#125;, and &#123;@link PartMap @PartMap&#125;</span><br><span class="line">    //ä»¥ä¸Šé¢è¿™å‡ ä¸ªæ³¨è§£çš„requestå¯ä»¥åœ¨è¿™é‡Œæ‹¦æˆªåˆ°å¹¶è¿›è¡Œå¤„ç† è€Œå…¶ä»–çš„åˆ™æ˜¯ç”¨ä¸‹é¢çš„æ–¹æ³•</span><br><span class="line">    @Override</span><br><span class="line">    public Converter&lt;?, RequestBody&gt; requestBodyConverter(Type type, Annotation[] parameterAnnotations, Annotation[] methodAnnotations, Retrofit retrofit) &#123;</span><br><span class="line">        Log.d(&quot;StringConverterFactory&quot;,&quot; type &quot;+type.toString());</span><br><span class="line">        return super.requestBodyConverter(type, parameterAnnotations, methodAnnotations, retrofit);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    @Override</span><br><span class="line">    public Converter&lt;?, String&gt; stringConverter(Type type, Annotation[] annotations, Retrofit retrofit) &#123;</span><br><span class="line">        Log.d(&quot;StringConverterFactory&quot;,&quot;stringConverter&quot;);</span><br><span class="line">        return super.stringConverter(type, annotations, retrofit);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public Converter&lt;ResponseBody, ?&gt; responseBodyConverter(Type type, Annotation[] annotations, Retrofit retrofit) &#123;</span><br><span class="line">        //å¦‚æœä¸æ˜¯æˆ‘ä»¬æƒ³è¦å¤„ç†çš„ç±»å‹ï¼Œåˆ™è¿”å›nullï¼Œä¸è¿›è¡Œå¤„ç†</span><br><span class="line">        if (type != String.class)&#123;</span><br><span class="line">            return null;</span><br><span class="line">        &#125;</span><br><span class="line">        return new StringResponseBodyConverter();//è¿™é‡Œè¿›è¡Œå¤„ç†</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class StringResponseBodyConverter implements Converter&lt;ResponseBody,String&gt;&#123;</span><br><span class="line">//å°† ResponseBody è½¬ä¸º String</span><br><span class="line">@Override public String convert(ResponseBody value) throws IOException &#123;</span><br><span class="line">    Log.d(&quot;StringResponseBody &quot;,&quot;StringResponseBody&quot;);</span><br><span class="line">    return value.string();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>Converter</code>æ˜¯ç”¨æ¥å°†<code>ResponseBody</code>è¿›è¡Œè½¬åŒ–çš„æˆ‘ä»¬éœ€è¦çš„ç±»<br><code>CallAdapter</code>æ˜¯ç”¨æ¥è½¬åŒ–è¿”å›ç±»å‹çš„ï¼Œæ¯”å¦‚å°†<code>Call</code>è½¬<code>Observable</code></p>
<h2 id="åˆ†äº«ä¸€ä¸ªå°tip"><a href="#åˆ†äº«ä¸€ä¸ªå°tip" class="headerlink" title="åˆ†äº«ä¸€ä¸ªå°tip"></a>åˆ†äº«ä¸€ä¸ªå°tip</h2><p>åœ¨QQç¾¤é‡Œè®¨è®º<code>Retrofit</code>çš„æ—¶å€™ï¼Œåˆ«äººåˆ†äº«çš„ä¸€ä¸ªå°æŠ€å·§<br>å½“é¡¹ç›®ä¸­çš„å¤§å¤šæ•°æ¥å£éœ€è¦tokenä½†æœ‰äº›ä¸éœ€è¦çš„æ—¶å€™ï¼Œå¯ä»¥åœ¨<code>@Headers</code>ä¸­å®šä¹‰<code>Authorization</code>ï¼Œå¹¶ç»™å…¶ä¸€ä¸ªå‚æ•°ï¼Œä¾‹å¦‚<code>true</code> or <code>false</code> ç„¶ååœ¨<code>Interceptor</code>ä¸­è¿›è¡Œåˆ¤æ–­å¹¶è¿›è¡Œå¤„ç†<br>ä¾‹å¦‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@Headers(&#123;&quot;\&quot;Cache-Control\&quot;:max-age=0&quot;,&quot;Authorization:true&quot;&#125;)</span><br><span class="line">@GET(&quot;4/start-image/&#123;width&#125;*&#123;height&#125;&quot;)</span><br><span class="line">Observable&lt;StartImageInfo&gt; getSplashImage(@Path(&quot;width&quot;) int width, @Path(&quot;height&quot;) int height);</span><br></pre></td></tr></table></figure>
<p>ç„¶ååœ¨è‡ªå®šä¹‰çš„<code>Interceptor</code>ä¸­å»å–å¾—<code>Authorization</code>çš„å€¼<br><code>request.headers().get(&quot;Authorization&quot;)</code>ï¼Œç„¶åè¿›è¡Œå¤„ç†</p>
<p>å‚è€ƒæ–‡ç« </p>
<p><a target="_blank" rel="noopener" href="http://www.jianshu.com/p/b6e68ac96f78">Retrofitä½¿ç”¨æŒ‡å—</a><br><br><a target="_blank" rel="noopener" href="http://blog.csdn.net/jdsjlzx/article/details/52246114"> Android Retrofit å®ç°æ–‡å­—ï¼ˆå‚æ•°ï¼‰å’Œå¤šå¼ å›¾ç‰‡ä¸€èµ·ä¸Šä¼ </a><br><br><a target="_blank" rel="noopener" href="http://www.println.net/post/deep-in-retrofit">æ·±å…¥æµ…å‡º Retrofitï¼Œè¿™ä¹ˆç‰›é€¼çš„æ¡†æ¶ä½ ä»¬è¿˜ä¸æ¥çœ‹çœ‹</a><br><br><a target="_blank" rel="noopener" href="http://wuxiaolong.me/2016/06/18/retrofits/">Android Retrofit 2.0 ä½¿ç”¨-è¡¥å……ç¯‡</a><br><br><a target="_blank" rel="noopener" href="http://www.jianshu.com/p/a94e38636fde">Android ä½ å¿…é¡»äº†è§£çš„ç½‘ç»œæ¡†æ¶Retrofit2.0</a><br><br><a target="_blank" rel="noopener" href="http://www.jianshu.com/p/acfefb0a204f">Retrofit 2.0 è¶…èƒ½å®è·µï¼ˆä¸‰ï¼‰ï¼Œè½»æ¾å®ç°å¤šæ–‡ä»¶&#x2F;å›¾ç‰‡ä¸Šä¼ </a><br></p>
</div><div class="article-licensing box"><div class="licensing-title"><p>Retrofit with okhttp</p><p><a href="https://ppting.me/2016/10/18/2016_10_18_retrofit_with_okhttp/">https://ppting.me/2016/10/18/2016_10_18_retrofit_with_okhttp/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>ä½œè€…</h6><p>PPTing</p></div></div><div class="level-item is-narrow"><div><h6>å‘å¸ƒäº</h6><p>2016-10-18</p></div></div><div class="level-item is-narrow"><div><h6>æ›´æ–°äº</h6><p>2022-02-04</p></div></div><div class="level-item is-narrow"><div><h6>è®¸å¯åè®®</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2017/12/24/2017_12_24_component_for_android/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">Android ç»„ä»¶åŒ–å¼€å‘</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2016/04/14/2016_04_14_statusbar/"><span class="level-item">çŠ¶æ€æ  Status Bar</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">è¯„è®º</h3><div id="comment-container"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js"></script><script>var gitalk = new Gitalk({
            id: "6f56b9a7d9e01f58db65c5adbba6d49c",
            repo: "ppting.github.io",
            owner: "PPTing",
            clientID: "8ee6c32324c60fd9fe83",
            clientSecret: "caabfe4dc60fd4b19575bcb4b754d5068a0f7a41",
            admin: ["PPTing"],
            createIssueManually: false,
            distractionFreeMode: false,
            perPage: 20,
            pagerDirection: "last",
            
            
            enableHotKey: true,
            language: "zh-CN",
        })
        gitalk.render('comment-container')</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="https://www.gravatar.com/avatar/f10df62c29905b9b4ba7aaa81b28f152?s=128" alt="PPTing"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">PPTing</p><p class="is-size-6 is-block">Android Developer | Frisbee Player</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Guangzhou,China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">æ–‡ç« </p><a href="/archives"><p class="title">45</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">åˆ†ç±»</p><a href="/categories"><p class="title">7</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">æ ‡ç­¾</p><a href="/tags"><p class="title">7</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/PPTing" target="_blank" rel="noopener">å…³æ³¨æˆ‘</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Email" href="mailto:zhengkejian0@gmail.com"><i class="fas fa-inbox"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/PPTing"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/atom.xml"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">ç›®å½•</h3><ul class="menu-list"><li><a class="level is-mobile" href="#å°è£…æ¥å£"><span class="level-left"><span class="level-item">å°è£…æ¥å£</span></span></a></li><li><a class="level is-mobile" href="#æ„é€ Retrofit"><span class="level-left"><span class="level-item">æ„é€ Retrofit</span></span></a></li><li><a class="level is-mobile" href="#GETæ–¹æ³•"><span class="level-left"><span class="level-item">GETæ–¹æ³•</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Path"><span class="level-left"><span class="level-item">@Path</span></span></a></li><li><a class="level is-mobile" href="#Query-å’Œ-QueryMap"><span class="level-left"><span class="level-item">@Query å’Œ @QueryMap</span></span></a></li></ul></li><li><a class="level is-mobile" href="#POSTæ–¹æ³•"><span class="level-left"><span class="level-item">POSTæ–¹æ³•</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Field"><span class="level-left"><span class="level-item">@Field</span></span></a></li><li><a class="level is-mobile" href="#FieldMap"><span class="level-left"><span class="level-item">@FieldMap</span></span></a></li></ul></li><li><a class="level is-mobile" href="#ä¼ jsonæ•°æ®"><span class="level-left"><span class="level-item">ä¼ jsonæ•°æ®</span></span></a></li><li><a class="level is-mobile" href="#ä¼ æ–‡ä»¶"><span class="level-left"><span class="level-item">ä¼ æ–‡ä»¶</span></span></a></li><li><a class="level is-mobile" href="#æ·»åŠ æ‹¦æˆªå™¨"><span class="level-left"><span class="level-item">æ·»åŠ æ‹¦æˆªå™¨</span></span></a></li><li><a class="level is-mobile" href="#è‡ªå®šä¹‰-Converter"><span class="level-left"><span class="level-item">è‡ªå®šä¹‰ Converter</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#å»ºä¸€ä¸ªç»§æ‰¿Converter-Factoryçš„Factoryç±»"><span class="level-left"><span class="level-item">å»ºä¸€ä¸ªç»§æ‰¿Converter.Factoryçš„Factoryç±»</span></span></a></li></ul></li><li><a class="level is-mobile" href="#åˆ†äº«ä¸€ä¸ªå°tip"><span class="level-left"><span class="level-item">åˆ†äº«ä¸€ä¸ªå°tip</span></span></a></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/favicon.ico" alt="PPTing&#039;s Blog" height="28"></a><p class="is-size-7"><span>&copy; 2022 PPTing</span>Â Â Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>Â &amp;Â <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/PPTing"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="å›åˆ°é¡¶ç«¯" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "æ­¤ç½‘ç«™ä½¿ç”¨Cookieæ¥æ”¹å–„æ‚¨çš„ä½“éªŒã€‚",
          dismiss: "çŸ¥é“äº†ï¼",
          allow: "å…è®¸ä½¿ç”¨Cookie",
          deny: "æ‹’ç»",
          link: "äº†è§£æ›´å¤š",
          policy: "Cookieæ”¿ç­–",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ..."></div><a class="searchbox-close" href="javascript:;">Ã—</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ...","untitled":"(æ— æ ‡é¢˜)","posts":"æ–‡ç« ","pages":"é¡µé¢","categories":"åˆ†ç±»","tags":"æ ‡ç­¾"});
        });</script></body></html>